<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Nieyy Store — Top Up & Item Fish It</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #0b1220;
        --card: rgba(255, 255, 255, 0.04);
        --accent: #06b6d4;
        --muted: #94a3b8;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: "Poppins", sans-serif;
        background: linear-gradient(180deg, #071029 0%, #081827 60%);
        color: #e6eef7;
      }
      .wrap {
        max-width: 1200px;
        margin: 24px auto;
        padding: 20px;
      }
      /* header */
      .topbar {
        display: flex;
        align-items: center;
        gap: 20px;
      }
      .logo {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .logo .mark {
        width: 48px;
        height: 48px;
        border-radius: 10px;
        background: linear-gradient(135deg, var(--accent), #7c3aed);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
      }
      .site-title {
        font-size: 20px;
        font-weight: 700;
      }
      .search {
        flex: 1;
        display: flex;
        align-items: center;
      }
      .search input {
        width: 100%;
        padding: 12px 16px;
        border-radius: 12px;
        border: 0;
        background: rgba(255, 255, 255, 0.03);
        color: inherit;
        font-size: 14px;
      }
      .nav-actions {
        display: flex;
        gap: 12px;
        align-items: center;
      }
      .btn {
        background: var(--accent);
        color: #042026;
        padding: 10px 14px;
        border-radius: 10px;
        border: none;
        font-weight: 600;
        cursor: pointer;
      }
      .ghost {
        background: transparent;
        border: 1px solid rgb(249, 245, 245);
        padding: 8px 12px;
        border-radius: 10px;
      }

      /* hero */
      .hero {
        display: flex;
        gap: 20px;
        margin-top: 24px;
      }
      .hero-left {
        flex: 1;
        background: linear-gradient(
          135deg,
          rgba(6, 182, 212, 0.08),
          rgba(124, 58, 237, 0.05)
        );
        padding: 22px;
        border-radius: 14px;
      }
      .hero-left h1 {
        margin: 0;
        font-size: 28px;
      }
      .hero-left p {
        color: var(--muted);
        margin-top: 8px;
      }
      .banner {
        width: 420px;
        border-radius: 14px;
        overflow: hidden;
        background: linear-gradient(135deg, #061026, #0e2740);
        box-shadow: 0 8px 30px rgba(2, 6, 23, 0.6);
      }
      .banner img {
        width: 100%;
        display: block;
      }

      /* categories */
      .cats {
        display: flex;
        gap: 10px;
        margin: 18px 0;
        flex-wrap: wrap;
      }
      .cat {
        background: var(--card);
        padding: 10px 14px;
        border-radius: 12px;
        font-weight: 600;
        color: var(--muted);
        cursor: pointer;
      }
      .cat.active {
        border: 1px solid rgba(255, 255, 255, 0.06);
        color: #fff;
      }

      /* products */
      .grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 18px;
        margin-top: 14px;
      }
      .card {
        background: rgba(255, 255, 255, 0.02);
        padding: 14px;
        border-radius: 12px;
        transition: transform 0.18s, box-shadow 0.18s;
      }
      .card:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 40px rgba(2, 6, 23, 0.6);
      }
      .card img {
        width: 100%;
        height: 160px;
        object-fit: cover;
        border-radius: 8px;
      }
      .card h3 {
        margin: 10px 0 6px;
        font-size: 16px;
      }
      .price {
        font-weight: 700;
        color: var(--accent);
      }
      .card .meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 10px;
      }

      /* right column */
      .layout {
        display: grid;
        grid-template-columns: 1fr 320px;
        gap: 18px;
        margin-top: 18px;
      }
      .panel {
        background: rgba(255, 255, 255, 0.03);
        padding: 16px;
        border-radius: 12px;
      }
      .cart-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      .cart-item {
        display: flex;
        gap: 10px;
        align-items: center;
      }
      .cart-item img {
        width: 56px;
        height: 56px;
        border-radius: 8px;
        object-fit: cover;
      }
      .cart-total {
        display: flex;
        justify-content: space-between;
        margin-top: 12px;
        font-weight: 700;
      }

      /* modal qris */
      .qris {
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        display: none;
        align-items: center;
        justify-content: center;
        background: rgba(2, 6, 23, 0.6);
      }
      .qris .box {
        width: 360px;
        background: #071227;
        padding: 20px;
        border-radius: 12px;
        text-align: center;
      }
      .qris img {
        width: 220px;
        border-radius: 12px;
      }

      footer {
        margin-top: 30px;
        color: var(--muted);
        text-align: center;
      }

      /* history modal */
      .history-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.65);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 9999;
      }

      .history-box {
        width: 500px;
        max-height: 80vh;
        overflow-y: auto;
        background: #0f1a2e;
        padding: 20px;
        border-radius: 14px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
      }

      .history-box h3 {
        margin: 0 0 15px 0;
        text-align: center;
        font-weight: 700;
      }

      .history-item {
        background: rgba(255, 255, 255, 0.05);
        padding: 12px;
        border-radius: 10px;
        margin-bottom: 12px;
      }

      @media (max-width: 980px) {
        .grid {
          grid-template-columns: repeat(2, 1fr);
        }
        .banner {
          display: none;
        }
        .layout {
          grid-template-columns: 1fr;
        }
      }
      @media (max-width: 640px) {
        .grid {
          grid-template-columns: 1fr;
        }
        .topbar {
          flex-direction: column;
          align-items: flex-start;
        }
        .search {
          width: 100%;
        }
        .logo .mark {
          width: 40px;
          height: 40px;
        }
      }
    </style>
  </head>
  <body>
    <script src="javascript.js"></script>
    <div class="wrap">
      <!-- HEADER -->
      <div class="topbar">
        <div class="logo">
          <div ">
            <img
              src="JPG/NieyyStore.png"
              alt="NieyyStore"
              style="width: 150px"
            />
          </div>
        </div>

        <div class="search">
          <input
            id="searchInput"
            placeholder="Top Up, Screat, atau GamePass..."
          />
        </div>

        <div class="nav-actions">
          <button class="btn" onclick="openHistory()">Riwayat</button>
          <button class="btn" onclick="scrollToShop()">Beli Sekarang</button>
        </div>
      </div>

      <!-- HERO -->
      <div class="hero">
        <div class="hero-left">
          <h1>Top Up Murah, Aman dan Cepat</h1>
          <p>
            Jual item Fish It, Robux, GamePass, dan perlengkapan lainnya.
            Bayar via QRIS atau kirim bukti pembayaran ke WhatsApp.
          </p>
          <div class="cats" id="cats">
            <div class="cat" data-cat="fishit">Fish It</div>
            <div class="cat" data-cat="joki">Joki</div>
            <div class="cat" data-cat="robux">Top Up Robux Via Login</div>
            <div class="cat" data-cat="robuxx">Top Up Robux Premium</div>
            <div class="cat" data-cat="gamepass">GamePass</div>
          </div>

          <div class="layout">
            <div>
              <div id="productGrid" class="grid"></div>
            </div>

            <div>
              <div class="panel">
                <h3 style="margin: 0">Keranjang</h3>
                <div
                  id="cartList"
                  class="cart-list"
                  style="margin-top: 12px"
                ></div>
                <div class="cart-total">
                  <div>Total</div>
                  <div id="cartTotal">Rp 0</div>
                </div>
                <div style="margin-top: 12px; display: flex; gap: 8px">
                  <button class="btn" onclick="checkout()">Bayar (QRIS)</button>
                  <button class="btn" onclick="contactWA()">WhatsApp</button>
                </div>
              </div>

              <div style="height: 18px"></div>

              <div class="panel">
                <h4 style="margin: 0 0 8px 0">Info Penjual</h4>
                <p style="margin: 0; color: var(--muted)">
                  WA: <b id="waNumber">085180676850</b><br />Nieyy Store — Fast
                  delivery
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <footer>© Nieyy Store — 2025*</footer>
    </div>

    <!-- QRIS Modal -->
    <div id="qrisModal" class="qris">
      <div class="box">
        <h3>Bayar via QRIS</h3>
        <p style="color: var(--muted)">
          Scan QRIS berikut lalu kirim bukti ke WhatsApp.
        </p>
        <img src="JPG/qris.jpeg" alt="QRIS" />
        <div
          style="
            margin-top: 12px;
            display: flex;
            gap: 8px;
            justify-content: center;
          "
        >
          <button class="btn" onclick="openWAWithText()">Kirim Bukti</button>
          <button class="btn" onclick="closeQris()">Tutup</button>
        </div>
      </div>
    </div>

    <div id="historyModal" class="history-modal">
      <div class="history-box">
        <h3>Riwayat Pembelian</h3>
        <div id="historyList"></div>
        <button
          class="btn"
          style="margin-top: 10px; width: 100%"
          onclick="closeHistory()"
        >
          Tutup
        </button>
      </div>
    </div>

    <script>
      // sample products (ganti sesuai kebutuhan)
      const products = [
        {
          id: 18,
          name: "SCREAT TUMBAL",
          cat: "fishit",
          price: 6000,
          img: "JPG/FISH/Screat Tumbal.png",
        },
        {
          id: 1,
          name: "EL MAJA",
          cat: "fishit",
          price: 48000,
          img: "JPG/FISH/El Maja.png",
        },
        {
          id: 2,
          name: "EL RETRO GRAN MAJA",
          cat: "fishit",
          price: 59000,
          img: "JPG/FISH/El Retro Maja.png",
        },
        {
          id: 3,
          name: "ROBOT KRAKEN",
          cat: "fishit",
          price: 35000,
          img: "JPG/FISH/Robot Kraken.png",
        },
        {
          id: 4,
          name: "LOCGNESS",
          cat: "fishit",
          price: 58000,
          img: "JPG/FISH/Locgness.png",
        },
        {
          id: 5,
          name: "ANCIENT LOCGNESS MONSTER",
          cat: "fishit",
          price: 65000,
          img: "JPG/FISH/Ancient Lochness Monster.png",
        },
        {
          id: 6,
          name: "MEGALODON",
          cat: "fishit",
          price: 37000,
          img: "JPG/FISH/Megalodon.png",
        },
        {
          id: 7,
          name: "MEGALODON ZOMBIE",
          cat: "fishit",
          price: 95000,
          img: "JPG/FISH/Megalodon Zombie.png",
        },
        {
          id: 8,
          name: "BLOODMOON WHALE",
          cat: "fishit",
          price: 155000,
          img: "JPG/FISH/Bloodmoon Whale.png",
        },
        {
          id: 9,
          name: "1x1x1x1 SHARK",
          cat: "fishit",
          price: 35000,
          img: "JPG/FISH/1x1x1x1 Shark.png",
        },
        {
          id: 10,
          name: "BIG WILD SERPENT",
          cat: "fishit",
          price: 53000,
          img: "JPG/FISH/Big Wild Serpent.png",
        },
        {
          id: 11,
          name: "TALON SERPENT",
          cat: "fishit",
          price: 53000,
          img: "JPG/FISH/Talon Serpent.png",
        },
        {
          id: 12,
          name: "ORCA",
          cat: "fishit",
          price: 27000,
          img: "JPG/FISH/Orca.png",
        },
        {
          id: 13,
          name: "GREAT WHALE",
          cat: "fishit",
          price: 27000,
          img: "JPG/FISH/Great Whale.png",
        },
        {
          id: 14,
          name: "WORM FISH",
          cat: "fishit",
          price: 32000,
          img: "JPG/FISH/Worm Fish.png",
        },
        {
          id: 15,
          name: "KING JELY",
          cat: "fishit",
          price: 27000,
          img: "JPG/FISH/King Jely.png",
        },
        {
          id: 16,
          name: "BONE WHALE",
          cat: "fishit",
          price: 33000,
          img: "JPG/FISH/Bone Whale.png",
        },
        {
          id: 17,
          name: "LABA-LABA SUNDA",
          cat: "fishit",
          price: 8000,
          img: "JPG/FISH/Laba Laba Sunda.png",
        },
        {
          id: 19,
          name: "500 ROBUX",
          cat: "robux",
          price: 78000,
          img: "JPG/Robux.png",
        },
        {
          id: 20,
          name: "1000 ROBUX",
          cat: "robux",
          price: 157000,
          img: "JPG/Robux.png",
        },
        {
          id: 21,
          name: "1500 ROBUX",
          cat: "robux",
          price: 234000,
          img: "JPG/Robux.png",
        },
        {
          id: 22,
          name: "2000 ROBUX",
          cat: "robux",
          price: 312000,
          img: "JPG/Robux.png",
        },
        {
          id: 23,
          name: "2500 ROBUX",
          cat: "robux",
          price: 390000,
          img: "JPG/Robux.png",
        },
        {
          id: 24,
          name: "3000 ROBUX",
          cat: "robux",
          price: 468000,
          img: "JPG/Robux.png",
        },
        {
          id: 25,
          name: "4000 ROBUX",
          cat: "robux",
          price: 624000,
          img: "JPG/Robux.png",
        },
        {
          id: 26,
          name: "5000 ROBUX",
          cat: "robux",
          price: 780000,
          img: "JPG/Robux.png",
        },
        {
          id: 27,
          name: "450 ROBUX PREMIUM",
          cat: "robuxx",
          price: 80000,
          img: "JPG/Robux.png",
        },
        {
          id: 28,
          name: "1000 ROBUX PREMIUM",
          cat: "robuxx",
          price: 161000,
          img: "JPG/Robux.png",
        },
        {
          id: 29,
          name: "2200 ROBUX PREMIUM",
          cat: "robuxx",
          price: 322000,
          img: "JPG/Robux.png",
        },
        {
          id: 30,
          name: "1x1x1x1 Ban Hammer",
          cat: "gamepass",
          price: 110000,
          img: "JPG/GAME PASS/Hammer.png",
        },
        {
          id: 31,
          name: "Binary Edge",
          cat: "gamepass",
          price: 85000,
          img: "JPG/GAME PASS/Binary Edge.png",
        },
        {
          id: 32,
          name: "Corruption Edge",
          cat: "gamepass",
          price: 85000,
          img: "JPG/GAME PASS/Corruption Edge.png",
        },
        {
          id: 33,
          name: "Hyper Boat Pack",
          cat: "gamepass",
          price: 100000,
          img: "JPG/GAME PASS/Hyper Boat Pack.png",
        },
        {
          id: 34,
          name: "Extra Luck",
          cat: "gamepass",
          price: 30000,
          img: "JPG/GAME PASS/Extra Luck.png",
        },
        {
          id: 35,
          name: "Double XP",
          cat: "gamepass",
          price: 25000,
          img: "JPG/GAME PASS/Double XP.png",
        },
        {
          id: 36,
          name: "Small Luck",
          cat: "gamepass",
          price: 7000,
          img: "JPG/GAME PASS/Small Luck.png",
        },
        {
          id: 37,
          name: "Vip + Luck",
          cat: "gamepass",
          price: 50000,
          img: "JPG/GAME PASS/Vip + Luck.png",
        },
        {
          id: 38,
          name: "Mutations",
          cat: "gamepass",
          price: 35000,
          img: "JPG/GAME PASS/Mutations.png",
        },
        {
          id: 39,
          name: "Advanced Luck",
          cat: "gamepass",
          price: 60000,
          img: "JPG/GAME PASS/Advanced Luck.png",
        },
        {
          id: 40,
          name: "Mini Hoverboat",
          cat: "gamepass",
          price: 28000,
          img: "JPG/GAME PASS/Mini Hoverboat.png",
        },
        {
          id: 41,
          name: "Sell Anywhere",
          cat: "gamepass",
          price: 40000,
          img: "JPG/GAME PASS/Sell Anywhere.png",
        },
        {
          id: 42,
          name: "JOKI ELEMENTAL ROD",
          cat: "joki",
          price: 130000,
          img: "JPG/GAME PASS/Element.png",
        },
        {
          id: 43,
          name: "JOKI GHOSTFIN ROD",
          cat: "joki",
          price: 75000,
          img: "JPG/GAME PASS/ghostfin.png",
        },
        {
          id: 44,
          name: "JOKI KOIN 1M",
          cat: "joki",
          price: 6000,
          img: "JPG/GAME PASS/jokikoin.png",
        },

      ];

      const cart = [];
      const waPhone = "6281234567890"; // nomor WA seller dalam format internasional tanpa +

      function renderProducts(list) {
        const grid = document.getElementById("productGrid");
        grid.innerHTML = "";
        list.forEach((p) => {
          const el = document.createElement("div");
          el.className = "card";
          el.innerHTML = `
          <img src="${p.img}" alt="${p.name}" />
          <h3>${p.name}</h3>
          <div style="color:var(--muted);font-size:13px">Kategori: ${
            p.cat
          }</div>
          <div class='meta'>
            <div class='price'>Rp ${numberFormat(p.price)}</div>
            <div><button class='btn' onclick='addToCart(${
              p.id
            })'>Beli</button></div>
          </div>
        `;
          grid.appendChild(el);
        });
      }

      function numberFormat(n) {
        return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
      }

      function addToCart(id) {
        const p = products.find((x) => x.id === id);
        const found = cart.find((i) => i.id === id);
        if (found) found.qty++;
        else
          cart.push({
            id: p.id,
            name: p.name,
            price: p.price,
            img: p.img,
            qty: 1,
          });
        renderCart();
      }

      function renderCart() {
        const list = document.getElementById("cartList");
        list.innerHTML = "";
        let total = 0;
        cart.forEach((i) => {
          total += i.price * i.qty;
          const div = document.createElement("div");
          div.className = "cart-item";
          div.innerHTML = `
          <img src="${i.img}" />
          <div style="flex:1">
            <div style='font-weight:600'>${i.name}</div>
            <div style='font-size:13px;color:var(--muted)'>Rp ${numberFormat(
              i.price
            )} x ${i.qty}</div>
          </div>
          <div style='text-align:right'>
            <div style='font-weight:700'>Rp ${numberFormat(
              i.price * i.qty
            )}</div>
            <div style='margin-top:6px;display:flex;gap:6px;justify-content:flex-end'>
              <button class='btn' onclick='changeQty(${i.id}, -1)'>-</button>
              <button class='btn' onclick='changeQty(${i.id}, 1)'>+</button>
              <button class='btn' onclick='removeItem(${i.id})'>Hapus</button>
            </div>
          </div>
        `;
          list.appendChild(div);
        });
        document.getElementById("cartTotal").innerText =
          "Rp " + numberFormat(total);
      }

      function changeQty(id, delta) {
        const it = cart.find((x) => x.id === id);
        if (!it) return;
        it.qty += delta;
        if (it.qty <= 0) removeItem(id);
        renderCart();
      }
      function removeItem(id) {
        const idx = cart.findIndex((x) => x.id === id);
        if (idx > -1) cart.splice(idx, 1);
        renderCart();
      }

      function checkout() {
        if (cart.length === 0) {
          alert("Keranjang kosong");
          return;
        }
        document.getElementById("qrisModal").style.display = "flex";
      }
      function closeQris() {
        document.getElementById("qrisModal").style.display = "none";
      }

      function openWAWithText() {
        // kirim pesan otomatis berisi list order dan total
        const lines = cart.map(
          (i) => `${i.qty}x ${i.name} — Rp ${numberFormat(i.price * i.qty)}`
        );
        let total = 0;
        cart.forEach((i) => (total += i.price * i.qty));
        const text = encodeURIComponent(
          `Halo, saya ingin pesan:\n${lines.join(
            "\n"
          )}\n\nTotal: Rp ${numberFormat(
            total
          )}\nSaya sudah bayar, terlampir bukti.`
        );
        window.open(`https://wa.me/${waPhone}?text=${text}`, "_blank");
      }

      function contactWA() {
        window.open(`https://wa.me/${waPhone}`, "_blank");
      }
      function openHistory() {
        alert("Fitur riwayat belum diaktifkan.");
      }
      function scrollToShop() {
        window.scrollTo({
          top: document.getElementById("productGrid").offsetTop - 80,
          behavior: "smooth",
        });
      }

      // categories
      document.querySelectorAll(".cat").forEach((c) =>
        c.addEventListener("click", (e) => {
          document
            .querySelectorAll(".cat")
            .forEach((x) => x.classList.remove("active"));
          e.currentTarget.classList.add("active");
          const cat = e.currentTarget.dataset.cat;
          const filtered =
            cat === "semua" ? products : products.filter((p) => p.cat === cat);
          renderProducts(filtered);
        })
      );

      // search
      document.getElementById("searchInput").addEventListener("input", (e) => {
        const q = e.target.value.toLowerCase();
        const filtered = products.filter(
          (p) =>
            p.name.toLowerCase().includes(q) || p.cat.toLowerCase().includes(q)
        );
        renderProducts(filtered);
      });

      // initial render
      renderProducts(products);
      renderCart();

      // SIMPAN RIWAYAT PEMBELIAN
      function saveHistory() {
        const history = JSON.parse(localStorage.getItem("history") || "[]");

        let total = 0;
        const items = cart.map((i) => {
          total += i.price * i.qty;
          return `${i.qty}x ${i.name} (Rp ${numberFormat(i.price * i.qty)})`;
        });

        const entry = {
          id: Date.now(),
          items,
          total,
          date: new Date().toLocaleString(),
          status: "Menunggu Bukti",
        };

        history.push(entry);
        localStorage.setItem("history", JSON.stringify(history));
      }

      // TAMPILKAN RIWAYAT
      function openHistory() {
        const history = JSON.parse(localStorage.getItem("history") || "[]");
        const box = document.getElementById("historyList");

        if (history.length === 0) {
          box.innerHTML = `<p style="text-align:center; opacity:0.7;">Belum ada riwayat.</p>`;
        } else {
          box.innerHTML = history
            .reverse()
            .map(
              (h) => `
      <div class="history-item">
        <b>Waktu:</b> ${h.date}<br>
        <b>Item:</b><br>${h.items.join("<br>")}
        <br><b>Total: Rp ${numberFormat(h.total)}</b><br>
        <b>Status:</b> ${h.status}
      </div>
    `
            )
            .join("");
        }

        document.getElementById("historyModal").style.display = "flex";
      }

      function closeHistory() {
        document.getElementById("historyModal").style.display = "none";
      }

      function checkout() {
        if (cart.length === 0) {
          alert("Keranjang kosong");
          return;
        }

        saveHistory(); // <--- TAMBAHKAN INI

        document.getElementById("qrisModal").style.display = "flex";
      }
    </script>
  </body>
</html>
